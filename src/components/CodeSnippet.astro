---
import {Code} from 'astro:components';
import type {BundledLanguage} from 'shiki'  // This is what Astro's Code uses internally

interface Props {
    src: string;
    lang?: string;
}

const {src, lang = "javascript"} = Astro.props;

const files = import.meta.glob<string>("/src/content/sketches/**/*.*", {
    query: "?raw",
    import: "default",
});

const filePath = Object.keys(files).find(path => path.endsWith(`/${src}`));
const fileContent = filePath ? await files[filePath]() : "";
---

<Code
        code={fileContent}
        lang={lang as BundledLanguage}
        theme="snazzy-light"
/>